
<%- include('../Layout/user/hedder.ejs') -%>


<body>
    <!-- Header Section Begin -->
    <header class="header">
        <div class="header__top">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-md-7">
                        <div class="header__top__left">
                            <p>Free shipping, 30-day return or refund guarantee.</p>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-5">
                        <div class="header__top__right">
                            <div class="header__top__links">
                                <% if (userData) { %>
                                    <!-- User is logged in -->
                                    <a href="/profile">Profile</a>
                                    <a href="/logout">Logout</a>
                                <% } else { %>
                                    <!-- User is not logged in -->
                                    <a href="/login">Sign in</a>
                                <% } %>                             
                            </div>                           
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-3">
                    <div class="header__logo">
                        <H4>EXIMIUS</H4>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <nav class="header__menu mobile-menu">
                        <ul>
                            <li><a href="/">Home</a></li>
                            <li class="active" ><a href="/store" >Shop</a></li>
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Contacts</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="col-lg-3 col-md-3">
                    <div class="header__nav__option">
                        <a href="/cart"><img src="img/icon/cart.png" alt=""> <span>0</span></a>
                        <div class="price">$0.00</div>
                    </div>
                </div>
            </div>
            <div class="canvas__open"><i class="fa fa-bars"></i></div>
        </div>
    </header>
    <!-- Header Section End -->

    <!-- Breadcrumb Section Begin -->
    <section class="breadcrumb-option">
        <div class="container">
            
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__text">
                        <h4>Shop</h4>
                        <div class="breadcrumb__links">
                            <a href="/">Home</a>
                            <span>Shop</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->

    <!-- Shop Section Begin -->
    <section class="shop spad">
        <div class="container">
            
            <div class="row">
                <div class="col-lg-3">
                    <div class="shop__sidebar">
                        <div class="shop__sidebar__search">
                            <form action="/store" method="GET">
                                <input type="text" id="search" name="search" placeholder="Search by name...">
                                <button type="submit"><span class="icon_search"></span></button>
                            </form>
                        </div>
    
                        <div class="shop__sidebar__accordion">
                            <div class="accordion" id="accordionExample">
                                <div class="card">
                                    <div class="card-heading">
                                        <a data-toggle="collapse" data-target="#collapseOne">Categories</a>
                                    </div>
                                    <div id="collapseOne" class="collapse show" data-parent="#accordionExample">
                                        <div class="card-body">
                                            <div class="shop__sidebar__categories">
                                                <ul class="nice-scroll">
                                                    <% categorie.forEach(category => { %>
                                                        <li>
                                                            <label>
                                                                <input type="checkbox" class="category-filter" value="<%= category._id %>"
                                                                    <%= selectedCategories.includes(category._id.toString()) ? 'checked' : '' %> >
                                                                <%= category.name %>
                                                            </label>
                                                        </li>
                                                    <% }) %>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-heading">
                                        <a data-toggle="collapse" data-target="#collapseTwo">Branding</a>
                                    </div>
                                    <div id="collapseTwo" class="collapse show" data-parent="#accordionExample">
                                        <div class="card-body">
                                            <div class="shop__sidebar__brand">
                                                <ul>
                                                    <% brand.forEach(brand => { %>
                                                        <li>
                                                            <label>
                                                                <input type="checkbox" class="brand-filter" value="<%= brand._id %>"
                                                                    <%= selectedBrands.includes(brand._id.toString()) ? 'checked' : '' %> >
                                                                <%= brand.BrandName %>
                                                            </label>
                                                        </li>
                                                    <% }) %>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div class="col-lg-9">
                    <div class="shop-product-options mb-4">
                        <div class="row align-items-center">
                            <div class="col-lg-6 col-md-6 col-sm-6">
                                <div class="shop-product-options-left">
                                    <p class="mb-0">Showing 1â€“12 of 126 results</p>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 text-end">
                                <div class="shop-product-options-right d-flex align-items-center justify-content-end">
                                    <label for="sort-by" class="mb-0" style="margin-right: 10px;">Sort by:</label>
                                    <select id="sort-by" class="form-select">
                                        <option value="low-to-high">Low To High</option>
                                        <option value="high-to-Low">High To Low </option>
                                        <option value="aA - zZ ">aA - zZ </option>
                                        <option value="zZ - aA ">zZ - aA </option>
                                        
                                    </select>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                    <div id="product-list">
                        <div class="row g-4">
                            <% product.forEach(product => { %>
                                <div class="col-lg-4 col-md-6 col-sm-6">
                                    <a href="/product-details/<%= product._id %>" class="text-decoration-none text-dark">
                                        <div class="product-item text-center">
                                            <div class="product-item-pic position-relative overflow-hidden">
                                                <img src="/productIMG/<%= product.productimages[0] %>" alt="<%= product.name %>"
                                                    class="img-fluid product-img"
                                                    style="width: 100%; height: 250px; object-fit: cover; transition: transform 0.5s ease;">
                                            </div>
                                            <div class="product-item-text py-3">
                                                <h6 class="mb-1" style="font-size: 16px;"><%= product.name %></h6>
                                                <h5 class="mb-0" style="font-size: 18px; color: #333;">$<%= product.price.toFixed(2) %></h5>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            <% }) %>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </section>
    
    <!-- Footer Section Begin -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="footer__about">
                        <div class="footer__logo">
                            <a href="#"><img src="img/footer-logo.png" alt=""></a>
                        </div>
                        <p>The customer is at the heart of our unique business model, which includes design.</p>
                        <a href="#"><img src="img/payment.png" alt=""></a>
                    </div>
                </div>
                <div class="col-lg-2 offset-lg-1 col-md-3 col-sm-6">
                    <div class="footer__widget"></div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6">
                    <div class="footer__widget">
                        <h6>MEN</h6>
                        <ul>
                            <li><a href="#">Shop</a></li>
                            <li><a href="#">About</a></li>
                            <li><a href="#">Categories</a></li>
                            <li><a href="#">Brands</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 offset-lg-1 col-md-6 col-sm-6">
                    <div class="footer__widget">
                        <h6>NewLetter</h6>
                        <div class="footer__newslatter">
                            <p>Be the first to know about new arrivals, look books, sales & promos!</p>
                            <form action="#">
                                <input type="text" placeholder="Your email">
                                <button type="submit"><span class="icon_mail_alt"></span></button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Search Begin -->
    <div class="search-model">
        <div class="h-100 d-flex align-items-center justify-content-center">
            <div class="search-close-switch">+</div>
            <form class="search-model-form">
                <input type="text" id="search-input" placeholder="Search here.....">
            </form>
        </div>
    </div>
    <!-- Search End -->
    
    <script>
        // JavaScript for hover effect
        document.querySelectorAll('.product__item__pic').forEach(pic => {
            pic.addEventListener('mouseover', function() {
                this.querySelector('img').style.transform = 'scale(1.1)';
            });
            pic.addEventListener('mouseout', function() {
                this.querySelector('img').style.transform = 'scale(1)';
            });
        });
    
        document.querySelectorAll('.category-filter, .brand-filter').forEach(filter => {
            filter.addEventListener('change', function() {
                const selectedCategories = Array.from(document.querySelectorAll('.category-filter:checked')).map(cb => cb.value);
                const selectedBrands = Array.from(document.querySelectorAll('.brand-filter:checked')).map(cb => cb.value);
    
                const url = new URL(window.location.href);
                url.searchParams.set('categories', selectedCategories.join(','));
                url.searchParams.set('brands', selectedBrands.join(','));
    
                window.location.href = url.toString();
            });
        });
    </script>
    

    <%- include('../Layout/user/footer.ejs') -%>